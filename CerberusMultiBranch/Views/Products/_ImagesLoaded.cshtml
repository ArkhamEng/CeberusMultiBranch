@model IEnumerable<CerberusMultiBranch.Models.Entities.Inventory.ProductImage>


<div class="panel panel-primary">
    <div class="panel-heading">
        Imagenes Guardadas
    </div>

    <div class="panel-body" style="max-height:300px;  overflow-y: scroll;">
        <table class="table table-striped">
            @foreach (var item in Model)
            {
                var base64 = Convert.ToBase64String(item.File);
                var imgSrc = String.Format("data:{0};base64,{1}", item.Type, base64);

                <tr>
                    <td>
                        
                    </td>
                    <td class="col-md-4" >
                        <div  class="thumbnail">
                            <img src="@imgSrc" class="img-rounded" />
                        </div>
                    </td>
                    <td class="col-md-6" valign="middle" />
                    <td >
                        <button class="btn btn-danger" type="button" onclick="DeleteImage(@item.ProductImageId)">
                            <span class="glyphicon glyphicon-trash"/>
                        </button>
                    </td>
                </tr>
            }
        </table>
    </div>

    <div class="panel-footer ">
    </div>
</div>

<script>
  
    function DeleteImage(id)
    {
        console.log("Deleting Image Id: " + id);

        //$("#prg .progress-bar").css("width", "50%").addClass("progress-bar-striped active").html("50%");

        $.ajax({
            url: "/Products/DeleteImage",
            type: "POST",
            data: {id:id},
            sucess: function (view)
            {
                console.log("Succes");
                $("#divImagesLoaded").html(view);
            },

            error: function (data)
            {
                console.log("Error"); 
            },
            statusCode:
            {
                200: function (view)
                {
                    console.log("Success 200: Authenticated ");
                    $("#divImagesLoaded").html(view);
                },
                401: function (data)
                {
                    console.log("401: Unauthenticated");
                }
            }
        });


    }


</script>
