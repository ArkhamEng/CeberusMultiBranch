@model IEnumerable<CerberusMultiBranch.Models.Entities.Catalog.Product>

@{var index = 0; }
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
<script type="text/javascript" language="javascript" src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>


    <table id="tbProducts" class="table  table-striped">
        <thead class="panel-heading">
            <tr hidden="hidden">
                <th class="col-md-2"></th>
                <th class="col-md-12"></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td class="col-md-3">

                        @if (item.Images.Count > 0)
                        {
                            var base64 = Convert.ToBase64String(item.Images.FirstOrDefault().ClearImage);
                            var imgSrc = String.Format("data:{0};base64,{1}", item.Images.FirstOrDefault().Type, base64);
                            <div class="thumbnail">
                                <img src="@imgSrc" />
                            </div>
                        }
                        else
                        {
                            <div class="item active thumbnail">
                                <img src="~/Content/Images/sinimagen.jpg" />
                            </div>
                        }

                    </td>

                    <td>
                        <h3>
                            @Html.DisplayFor(model => item.Name)
                        </h3>
                        <h4>
                            @Html.DisplayFor(model => item.StorePrice)
                        </h4>
                        @Html.DisplayFor(model => item.Description)
                        <h5>
                            Código: @Html.DisplayFor(model => item.Code)
                        </h5>
                    </td>

                    <td class="form-group" align="center">
                        @Html.ActionLink(" ", "Create", new { id = item.ProductId }, new { @class = "btn btn-primary glyphicon glyphicon-pencil" })

                        @Html.ActionLink(" ", "Delete", new { id = item.ProductId }, new { @class = "btn btn-danger glyphicon glyphicon-trash" })
                    </td>
                </tr>
                index++;
            }
        </tbody>
    </table>



<div id="divModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div id="divCarousel" class="carousel slide" data-ride="carousel">
                <div id="divContent">

                </div>

                <a class="left carousel-control" href="#divCarousel" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#divCarousel" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function ()
    {
        SetDataTable("#tbProducts");
    })


    function RowCreated(row)
    {

    }

    function Show(carousel)
    {
        console.log("Show Carousel");
        $(divContent).html($(carousel).clone());
        $(divModal).modal('show');
    }

    function RowCreated2(row) {
        var id = $(row).find('td:eq(0)').text();
        var options = {
            title: "Quieres borrar el registro?", placement: "left", buttons: [
         { label: "Si", class: 'btn btn-primary', icon: 'glyphicon glyphicon-ok', onClick: function () { Delete(id, row); } },
         { label: "No", class: 'btn btn-danger', icon: 'glyphicon glyphicon-remove' }]
        }

        $(row).find('td:eq(6)').children("button").confirmation(options);
        $(row).dblclick(Select);
    }

</script>